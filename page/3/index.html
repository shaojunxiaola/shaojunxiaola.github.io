<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Xiao | 世界很美，而你正好有空</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Xiao</h1><a id="logo" href="/.">Xiao</a><p class="description">世界很美，而你正好有空</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2017/03/02/iOS%E7%8A%B6%E6%80%81%E6%A0%8F%E9%A2%9C%E8%89%B2/">iOS状态栏颜色</a></h1><div class="post-meta">2017-03-02</div><div class="post-content"><blockquote>
<p>修改状态栏显示颜色</p>
</blockquote>
<h3 id="1-由系统管理状态栏颜色"><a href="#1-由系统管理状态栏颜色" class="headerlink" title="1. 由系统管理状态栏颜色"></a>1. 由系统管理状态栏颜色</h3><p>在 <strong>info.Plist</strong> 文件中添加一项：View controller-based status bar appearance，Value 设置为NO，表示由系统管理状态栏。</p>
<p>法一：在AppDelegate中添加如下代码：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br></pre></td></tr></table></figure>

<p>法二：在 <strong>info.plist</strong> 文件中添加一项：Status bar style，Value 设置为 UIStatusBarStyleLightContent。</p>
<p>以上两种方法都可以让状态栏变为白色。</p>
<h3 id="2-状态栏颜色由各自ViewController控制"><a href="#2-状态栏颜色由各自ViewController控制" class="headerlink" title="2. 状态栏颜色由各自ViewController控制"></a>2. 状态栏颜色由各自ViewController控制</h3><p>如果不想应用里所有的页面状态栏都是相同的颜色，可以在 <strong>info.Plist</strong> 中添加一项： View controller-based status bar appearance 并设置为 YES，将 statusBar 的控制权交给各自的控制器，在需要修改状态栏的控制器的 viewDidLoad 方法中添加如下代码：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br></pre></td></tr></table></figure></div><p class="readmore"><a href="/2017/03/02/iOS%E7%8A%B6%E6%80%81%E6%A0%8F%E9%A2%9C%E8%89%B2/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/02/21/Cannot-proceed-with-delivery/">Cannot proceed with delivery</a></h1><div class="post-meta">2017-02-21</div><div class="post-content"><blockquote>
<p>使用 delivery 工具上传 app 到 iTunes Connect ，中途上传失败或强行终止，导致 token 被锁定。</p>
</blockquote>
<h3 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Cannot proceed with delivery:</span> <span class="string">an</span> <span class="string">existing</span> <span class="string">transporter</span> <span class="string">instance</span> <span class="string">is</span> <span class="string">currently</span> <span class="string">uploading</span> <span class="string">this</span> <span class="string">package",</span> </span><br><span class="line"><span class="string">In</span> <span class="string">the</span> <span class="string">upload</span> <span class="string">error</span> <span class="string">log</span> <span class="string">I</span> <span class="string">can</span> <span class="string">see</span> <span class="string">that</span> <span class="string">it</span> <span class="string">first</span> <span class="string">gives</span> <span class="string">an</span> <span class="string">warning</span> <span class="string">"Failed to obtain exclusive lock on token file. </span></span><br><span class="line"><span class="string">Please ensure the following file is not locked by another process:</span></span><br><span class="line"><span class="string"> /users/xiao/.itmstransporter\UploadTokens\xxxxx.local_itunesConnectUSERxxxxxx.itmsp.token</span></span><br></pre></td></tr></table></figure>

<h3 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h3><h4 id="1-进入UploadTokens所在的目录"><a href="#1-进入UploadTokens所在的目录" class="headerlink" title="1. 进入UploadTokens所在的目录"></a>1. 进入UploadTokens所在的目录</h4><p><strong>注</strong>：路径，错误信息里可以获取</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">cd</span> <span class="string">/users/xiao/.itmstransporter\UploadTokens</span></span><br></pre></td></tr></table></figure>

<h4 id="2-然后打开-token-文件，删除里面的内容，保存。或者，直接把-token文件删除。"><a href="#2-然后打开-token-文件，删除里面的内容，保存。或者，直接把-token文件删除。" class="headerlink" title="2. 然后打开 .token 文件，删除里面的内容，保存。或者，直接把 .token文件删除。"></a>2. 然后打开 .token 文件，删除里面的内容，保存。或者，直接把 .token文件删除。</h4><h4 id="3-修改一下构建号，重新上传"><a href="#3-修改一下构建号，重新上传" class="headerlink" title="3. 修改一下构建号，重新上传"></a>3. 修改一下构建号，重新上传</h4></div><p class="readmore"><a href="/2017/02/21/Cannot-proceed-with-delivery/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/02/12/SecKey-API-returned-25308/">SecKey API returned: -25308</a></h1><div class="post-meta">2017-02-12</div><div class="post-content"><blockquote>
<p>钥匙串访问权限解锁</p>
</blockquote>
<h3 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h3><p>调用iOS自动化打包脚本时，报错 :</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SecKey API returned:</span> <span class="number">-25308</span><span class="string">,</span> <span class="string">(null)/Users/xiao/Library/Developer/Xcode/DerivedData/HaiFu-ayuavvcfwmczwkasaoojsrongeax/Build/Intermediates/ArchiveIntermediates/HaiFu/InstallationBuildProductsLocation/Applications/HaiFu.app:</span> <span class="string">unknown</span> <span class="string">error</span> <span class="number">-1</span><span class="string">=ffffffffffffffff</span></span><br></pre></td></tr></table></figure>


<h3 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h3><p>由于Xcodebuild命令打包时会调用Codesign进行签名，而此错误就是由于无法使用证书授权签名所致，可以在脚本中添加解锁</p></div><p class="readmore"><a href="/2017/02/12/SecKey-API-returned-25308/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/20/Your-app-do-not-reflect-the-name/">Your app do not reflect the name</a></h1><div class="post-meta">2017-01-20</div><div class="post-content"><h3 id="PLA-1-2"><a href="#PLA-1-2" class="headerlink" title="PLA 1.2"></a>PLA 1.2</h3><p>The Seller and Artist names associated with your app do not reflect the name, “app name,” in the app or its metadata, as required by section 1.2 of the Apple Developer Program License Agreement.</p>
<h3 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h3><p>Your app must be published under a Seller name and Artist name that reflects the app name brand. If you have developed these apps on behalf of a client, please advise your client to add you to the development team of their Apple Developer account.</p></div><p class="readmore"><a href="/2017/01/20/Your-app-do-not-reflect-the-name/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/19/Shell%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/">Shell条件判断</a></h1><div class="post-meta">2017-01-19</div><div class="post-content"><h3 id="一、文件类型判断"><a href="#一、文件类型判断" class="headerlink" title="一、文件类型判断"></a>一、文件类型判断</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-b</td>
<td>判断文件是否存在，且是否为块设备文件（是块设备文件则为真）</td>
</tr>
<tr>
<td>-c</td>
<td>判断文件是否存在，且是否为字符设备文件（是字符设备文件则为真）</td>
</tr>
<tr>
<td><strong>-d</strong></td>
<td>判断文件是否存在，且是否为目录文件（是目录文件则为真）</td>
</tr>
<tr>
<td><strong>-e</strong></td>
<td>判断文件是否存在（存在则为真）</td>
</tr>
<tr>
<td><strong>-f</strong></td>
<td>判断文件是否存在，且是否为普通文件（是普通文件则为真）</td>
</tr>
<tr>
<td>-L</td>
<td>判断文件是否存在，且是否为符号链接文件（是符号链接文件则为真）</td>
</tr>
<tr>
<td>-p</td>
<td>判断文件是否存在，且是否为管道文件（是管道文件则为真）</td>
</tr>
<tr>
<td>-s</td>
<td>判断文件是否存在，且是否为非空（非空则为真）</td>
</tr>
<tr>
<td>-S</td>
<td>判断文件是否存在，且是否为套接字文件（是套接字文件则为真）</td>
</tr>
</tbody></table></div><p class="readmore"><a href="/2017/01/19/Shell%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/18/Fastlane%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BB%84%E4%BB%B6/">Fastlane自动化组件</a></h1><div class="post-meta">2017-01-18</div><div class="post-content"><blockquote>
<p>fastlane is the tool to release your iOS and Android app. It handles all tedious tasks, like generating screenshots, dealing with code signing, and releasing your application.</p>
</blockquote>
<p>相关文档</p>
<ul>
<li><a href="https://fastlane.tools" target="_blank" rel="noopener">官网</a></li>
<li><a href="https://github.com/fastlane/fastlane" target="_blank" rel="noopener">Github</a></li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p><a href="https://github.com/fastlane/fastlane/tree/master/scan" target="_blank" rel="noopener">scan</a>：自动运行测试工具，并生成漂亮的HTML报告</div><p class="readmore"><a href="/2017/01/18/Fastlane%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BB%84%E4%BB%B6/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/17/App-includes-an-update-button/">App includes an update button</a></h1><div class="post-meta">2017-01-17</div><div class="post-content"><p>Design Preamble</p>
<p>Your app includes an update button or alerts the user to update the app. To avoid user confusion, app version updates must utilize the iOS built-in update mechanism. </p>
<p>We’ve attached screenshot(s) for your reference.</p>
<p>Next Steps</p>
<p>Please remove the update feature from your app. To distribute a new version of your app, upload the new app binary version into the same iTunes Connect record you created for the app’s previous version. Updated versions keep the same Apple ID, iTunes Connect ID (SKU), and bundle ID as the original version, and are available free to customers who purchased a previous version. </p>
<p>Resources</p>
<p>To create new versions of your app, please see Replacing Your App with a New Version in the iTunes Connect Developer Guide.</div><p class="readmore"><a href="/2017/01/17/App-includes-an-update-button/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0/">小程序相关文章</a></h1><div class="post-meta">2017-01-15</div><div class="post-content"><ol>
<li><a href="https://segmentfault.com/a/1190000008056208" target="_blank" rel="noopener">摩拜单车微信小程序开发技术总结</a></li>
<li><a href="https://gold.xitu.io/entry/5872f63d61ff4b005c4925c6" target="_blank" rel="noopener">微信小程序—仿芒果 TV（已开源）</a></div><p class="readmore"><a href="/2017/01/15/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/13/iOS%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85-I-%E4%BB%A3%E7%A0%81%E7%AD%BE%E5%90%8D/">iOS自动化打包(I):代码签名</a></h1><div class="post-meta">2017-01-13</div><div class="post-content"><blockquote>
<p>大多数时候代码签名看上去就像是一个难以理解的神秘黑盒。最近在做iOS自动化打包，有许多相似但又不同的APP，一个个打包耗时挺长，浪费人力，如何“快速自动化生成”这样的需求也就应运而生了。</p>
</blockquote>
<p><strong>此篇是iOS自动化打包的第一篇，主要介绍一些重新签名需要了解的一些理论知识。</strong></p>
<ul>
<li>证书：内容是公钥或私钥，由其他机构对其签名组成的数据包;</li>
<li>Entitlements：包含了 App 权限开关列表;</li>
<li>CertificateSigningRequest：本地公钥;</li>
<li>p12：本地私钥，可以导入到其他电脑;</li>
<li>Provisioning Profile：包含了 证书 / Entitlements 等数据，并由苹果后台私钥签名的数据包;</li>
</ul>
<h3 id="一、证书和密匙"><a href="#一、证书和密匙" class="headerlink" title="一、证书和密匙"></a>一、证书和密匙</h3><p>iOS 开发者使用的 Mac 应该已经有一个证书，一个公钥，以及一个私钥。这些是代码签名机制的核心。</p>
<p>在 OS X 上，证书都是由一个叫钥匙串访问的工具来进行管理。打开 Mac 的钥匙串访问应用，选择类别选项下的“我的证书（My Certificates）”，你可以看到所有你持有的私钥相对应的证书。</div><p class="readmore"><a href="/2017/01/13/iOS%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85-I-%E4%BB%A3%E7%A0%81%E7%AD%BE%E5%90%8D/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/01/05/CAReplicatorLayer%E7%AE%80%E4%BB%8B/">CAReplicatorLayer简介</a></h1><div class="post-meta">2017-01-05</div><div class="post-content"><blockquote>
<p>CAReplicatorLayer的目的是为了高效生成许多相似的图层。它会绘制一个或多个图层的子图层，并在每个复制体上应用不同的变换。</p>
</blockquote></div><p class="readmore"><a href="/2017/01/05/CAReplicatorLayer%E7%AE%80%E4%BB%8B/">阅读全文</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/page/2/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/">下一页</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apple/">Apple</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Document/">Document</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fastlane/">Fastlane</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac/">Mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reader/">Reader</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Core-Animation/" style="font-size: 15px;">Core Animation</a> <a href="/tags/Tips/" style="font-size: 15px;">Tips</a> <a href="/tags/Github/" style="font-size: 15px;">Github</a> <a href="/tags/JSPatch/" style="font-size: 15px;">JSPatch</a> <a href="/tags/blueprint/" style="font-size: 15px;">blueprint</a> <a href="/tags/Base/" style="font-size: 15px;">Base</a> <a href="/tags/%E5%9F%8B%E7%82%B9/" style="font-size: 15px;">埋点</a> <a href="/tags/Xcode/" style="font-size: 15px;">Xcode</a> <a href="/tags/UDID/" style="font-size: 15px;">UDID</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/05/05/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/26/fastlane-cert/">自动化配置iOS开发者证书</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/17/APP-Download-Link/">APP Download Link</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/26/Transporter-Error-Output/">Transporter Error Output</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/18/Byte-array-to-UIImage/">Byte数组转化为UIImage</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/16/iOS-YTKNetwork-HTTPS/">iOS YTKNetwork 适配 HTTPS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/16/iOS-AFNetworking-HTTPS/">iOS AFNetworking 适配 HTTPS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/31/%E4%BD%BF%E7%94%A8Shell%E8%84%9A%E6%9C%AC%E6%89%B9%E9%87%8F%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87/">使用Shell脚本批量压缩图片</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/23/Objective-C-Coding-Guidelines/">Objective-C Coding Guidelines</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/11/%E9%82%93%E7%99%BD%E6%B0%8F%E7%A0%81%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2/">邓白氏码信息查询</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Xiao.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>